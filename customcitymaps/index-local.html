<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Custom City Maps - Local Development</title>
    
    <!-- Google Fonts for poster labels -->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Abril+Fatface&family=Alfa+Slab+One&family=Anton&family=Archivo+Black&family=Arvo&family=Bangers&family=Barlow+Condensed:wght@400;700&family=Bebas+Neue&family=Bitter:wght@400;700&family=Bungee&family=Comfortaa:wght@400;700&family=Concert+One&family=Cormorant+Garamond:wght@400;700&family=Crimson+Text:wght@400;700&family=DM+Sans:wght@400;700&family=Dancing+Script:wght@400;700&family=EB+Garamond:wght@400;700&family=Fjalla+One&family=Fredoka+One&family=Great+Vibes&family=Inter:wght@400;700&family=Josefin+Sans:wght@400;700&family=Karla:wght@400;700&family=Lato:wght@400;700&family=Libre+Baskerville:wght@400;700&family=Lobster&family=Merriweather:wght@400;700&family=Montserrat:wght@400;700&family=Nunito:wght@400;700&family=Open+Sans:wght@400;700&family=Oswald:wght@400;700&family=PT+Sans:wght@400;700&family=Pacifico&family=Passion+One&family=Permanent+Marker&family=Playfair+Display:wght@400;700&family=Poppins:wght@400;700&family=Quicksand:wght@400;700&family=Raleway:wght@400;700&family=Righteous&family=Roboto:wght@400;700&family=Rubik:wght@400;700&family=Russo+One&family=Source+Sans+Pro:wght@400;700&family=Staatliches&family=Teko:wght@400;700&family=Ultra&family=Varela+Round&family=Work+Sans:wght@400;700&family=Yanone+Kaffeesatz:wght@400;700&display=swap" rel="stylesheet">
    
    <!-- Mapbox CSS -->
    <link href="https://api.mapbox.com/mapbox-gl-js/v3.0.0/mapbox-gl.css" rel="stylesheet">
    <link rel="stylesheet" href="https://api.mapbox.com/mapbox-gl-js/plugins/mapbox-gl-geocoder/v5.0.0/mapbox-gl-geocoder.css" type="text/css">
    
    <!-- Local CSS (same as Shopify asset) -->
    <link rel="stylesheet" href="map-editor.css">
    
    <style>
        /* Additional styles to make it work standalone without Shopify theme */
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }
        
        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Oxygen, Ubuntu, sans-serif;
            line-height: 1.5;
            color: #333;
        }
        
        /* Make the editor fill the viewport when standalone */
        .editor-container {
            min-height: 100vh;
        }
    </style>
</head>
<body>

<div class="editor-container">
  <div class="editor-visual">
    <!-- Fullscreen toggle button -->
    <button id="fullscreen-toggle" class="fullscreen-btn" title="Toggle fullscreen mode">
      <svg class="icon-expand" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
        <path d="M8 3H5a2 2 0 0 0-2 2v3m18 0V5a2 2 0 0 0-2-2h-3m0 18h3a2 2 0 0 0 2-2v-3M3 16v3a2 2 0 0 0 2 2h3"/>
      </svg>
      <svg class="icon-collapse" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" style="display:none;">
        <path d="M4 14h3a2 2 0 0 1 2 2v3m12-3v3a2 2 0 0 1-2 2h-3m0-18h3a2 2 0 0 1 2 2v3M7 4H4a2 2 0 0 0-2 2v3"/>
      </svg>
    </button>
    <div id="visual-preview-wrapper">
      <div id="poster-frame-wrapper">
        <div id="poster-canvas">
          <!-- Draggable & Resizable Map Container -->
          <div id="map-container-frame">
            <div id="map"></div>
            <!-- Resize handles - all 8 directions -->
            <div class="resize-handle rh-n" data-dir="n"></div>
            <div class="resize-handle rh-s" data-dir="s"></div>
            <div class="resize-handle rh-e" data-dir="e"></div>
            <div class="resize-handle rh-w" data-dir="w"></div>
            <div class="resize-handle rh-nw" data-dir="nw"></div>
            <div class="resize-handle rh-ne" data-dir="ne"></div>
            <div class="resize-handle rh-sw" data-dir="sw"></div>
            <div class="resize-handle rh-se" data-dir="se"></div>
            <!-- Drag handle for map -->
            <div class="map-drag-handle" title="Drag to move map">⊞</div>
          </div>

          <!-- Draggable Labels Container -->
          <div class="poster-labels" id="poster-labels">
            <div class="labels-drag-handle" title="Drag to move text">⋮⋮</div>
            <div id="label-city" contenteditable="true" spellcheck="false">NEW YORK</div>
            <div id="label-state" contenteditable="true" spellcheck="false">UNITED STATES</div>
            <div id="label-coords" contenteditable="true" spellcheck="false">40.7128° N / 74.0060° W</div>
          </div>
        </div>
      </div>

      <div class="zoom-controls">
        <button id="btn-zoom-out" type="button" aria-label="Zoom Out">−</button>
        <button id="btn-zoom-in" type="button" aria-label="Zoom In">+</button>
        <input type="range" id="poster-scale-slider" min="50" max="150" value="100" aria-label="Poster Scale">
        <span id="poster-scale-value">100%</span>
      </div>
    </div>
  </div>

  <div class="editor-sidebar">
    <div class="sidebar-nav">
      <button class="nav-tab active" data-target="tab-location">
        <svg class="icon-thin" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.5">
          <path d="M21 10c0 7-9 13-9 13s-9-6-9-13a9 9 0 0118 0z"/><circle cx="12" cy="10" r="3"/>
        </svg>
        <span>Location</span>
      </button>

      <button class="nav-tab" data-target="tab-style">
        <svg class="icon-thin" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.5">
          <rect x="3" y="5" width="18" height="14" rx="2"/>
          <circle cx="8" cy="10" r="1.5"/>
          <path d="M21 15l-5-4-3 2.5L8 10l-5 5"/>
        </svg>
        <span>Style</span>
      </button>

      <button class="nav-tab" data-target="tab-labels">
        <svg class="icon-thin" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.5">
          <path d="M17 3a2.8 2.8 0 114 4L7.5 20.5 2 22l1.5-5.5L17 3z"/>
        </svg>
        <span>Labels</span>
      </button>

      <button class="nav-tab" data-target="tab-size">
        <svg class="icon-thin" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.5">
          <path d="M15 3h6v6M9 21H3v-6M21 3l-7 7M3 21l7-7"/>
        </svg>
        <span>Size</span>
      </button>

      <button class="nav-tab" data-target="tab-frame">
        <svg class="icon-thin" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.5">
          <rect x="2" y="2" width="20" height="20" rx="1"/>
          <rect x="5" y="5" width="14" height="14" rx="0.5"/>
          <path d="M2 2l3 3M22 2l-3 3M2 22l3-3M22 22l-3-3"/>
        </svg>
        <span>Frame</span>
      </button>
    </div>

    <div class="sidebar-panels">
      <div id="tab-location" class="editor-panel active">
        <h2>Pick your spot</h2>
        <div id="geocoder-container"></div>
        <p class="help-text">Search for a city, neighborhood, or coordinates.</p>
      </div>

      <div id="tab-style" class="editor-panel">
        <h2>Map Style</h2>
        <div class="style-grid">
          <button class="style-btn active" data-style="mapbox://styles/mapbox/streets-v12">
            <span class="preview-dot" style="background:#f0f0f0"></span> Classic
          </button>
          <button class="style-btn" data-style="mapbox://styles/mapbox/light-v11">
            <span class="preview-dot" style="background:#ffffff"></span> Clean
          </button>
          <button class="style-btn" data-style="mapbox://styles/mapbox/dark-v11">
            <span class="preview-dot" style="background:#222"></span> Dark
          </button>
          <button class="style-btn" data-style="mapbox://styles/mapbox/satellite-v9">
            <span class="preview-dot" style="background:#345"></span> Satellite
          </button>
        </div>
        <div class="input-group" style="margin-top: 20px;">
          <label>Background Color</label>
          <input type="color" id="map-bg-color" value="#ffffff" class="color-picker">
        </div>

        <h2 style="margin-top: 30px;">Map Shape</h2>
        <div class="style-grid">
          <button class="shape-btn active" data-orientation="portrait">
            <svg width="12" height="16" viewBox="0 0 12 16" fill="none" stroke="currentColor" stroke-width="1.5" style="margin-right:10px;">
              <rect x="1" y="1" width="10" height="14" rx="1"/>
            </svg>
            Portrait
          </button>
          <button class="shape-btn" data-orientation="landscape">
            <svg width="16" height="12" viewBox="0 0 16 12" fill="none" stroke="currentColor" stroke-width="1.5" style="margin-right:10px;">
              <rect x="1" y="1" width="14" height="10" rx="1"/>
            </svg>
            Landscape
          </button>
          <button class="shape-btn active" data-shape="rectangle">
            <svg width="16" height="12" viewBox="0 0 16 12" fill="none" stroke="currentColor" stroke-width="1.5" style="margin-right:10px;">
              <rect x="1" y="1" width="14" height="10" rx="0"/>
            </svg>
            Rectangle
          </button>
          <button class="shape-btn" data-shape="circle">
            <svg width="14" height="14" viewBox="0 0 14 14" fill="none" stroke="currentColor" stroke-width="1.5" style="margin-right:10px;">
              <circle cx="7" cy="7" r="6"/>
            </svg>
            Circle
          </button>
        </div>

        <h2 style="margin-top: 30px;">Map Outline</h2>
        <div class="input-group">
          <label>Line Type</label>
          <select id="outline-type" class="full-select">
            <option value="solid">Solid</option>
            <option value="dashed">Dashed</option>
            <option value="two-lines">Two Lines</option>
            <option value="two-lines-thin">Two Lines (inner thin)</option>
            <option value="two-lines-thick">Two Lines (inner thick)</option>
          </select>
        </div>
        <div class="input-group">
          <label>Outline Color</label>
          <input type="color" id="outline-color" value="#111111" class="color-picker">
        </div>
        <div class="input-group">
          <label>Outline Size</label>
          <div class="outline-slider-row">
            <input type="range" id="outline-size" min="1" max="10" value="1">
            <span id="outline-size-value">1px</span>
          </div>
        </div>

      </div>

      <div id="tab-labels" class="editor-panel">
        <h2>Title</h2>
        <div class="input-group">
          <input type="text" id="input-city" value="NEW YORK">
        </div>
        <div class="label-controls">
          <select id="title-font" class="font-select">
            <option value="Montserrat">Montserrat</option>
            <option value="Playfair Display">Playfair Display</option>
            <option value="Oswald">Oswald</option>
            <option value="Bebas Neue">Bebas Neue</option>
            <option value="Raleway">Raleway</option>
            <option value="Poppins">Poppins</option>
            <option value="Lato">Lato</option>
            <option value="Roboto">Roboto</option>
            <option value="Open Sans">Open Sans</option>
            <option value="Anton">Anton</option>
            <option value="Abril Fatface">Abril Fatface</option>
            <option value="Righteous">Righteous</option>
            <option value="Lobster">Lobster</option>
            <option value="Pacifico">Pacifico</option>
            <option value="Dancing Script">Dancing Script</option>
            <option value="Great Vibes">Great Vibes</option>
            <option value="Permanent Marker">Permanent Marker</option>
            <option value="Bangers">Bangers</option>
            <option value="Alfa Slab One">Alfa Slab One</option>
            <option value="Archivo Black">Archivo Black</option>
            <option value="Russo One">Russo One</option>
            <option value="Bungee">Bungee</option>
            <option value="Staatliches">Staatliches</option>
            <option value="Barlow Condensed">Barlow Condensed</option>
            <option value="Josefin Sans">Josefin Sans</option>
            <option value="Fjalla One">Fjalla One</option>
            <option value="Yanone Kaffeesatz">Yanone Kaffeesatz</option>
            <option value="Concert One">Concert One</option>
            <option value="Passion One">Passion One</option>
            <option value="Fredoka One">Fredoka One</option>
            <option value="Ultra">Ultra</option>
            <option value="Teko">Teko</option>
            <option value="Arvo">Arvo</option>
            <option value="Bitter">Bitter</option>
            <option value="Merriweather">Merriweather</option>
            <option value="Crimson Text">Crimson Text</option>
            <option value="PT Sans">PT Sans</option>
            <option value="Source Sans Pro">Source Sans Pro</option>
            <option value="Work Sans">Work Sans</option>
            <option value="DM Sans">DM Sans</option>
            <option value="Inter">Inter</option>
            <option value="Nunito">Nunito</option>
            <option value="Quicksand">Quicksand</option>
            <option value="Comfortaa">Comfortaa</option>
            <option value="Varela Round">Varela Round</option>
            <option value="Rubik">Rubik</option>
            <option value="Karla">Karla</option>
            <option value="Libre Baskerville">Libre Baskerville</option>
            <option value="EB Garamond">EB Garamond</option>
            <option value="Cormorant Garamond">Cormorant Garamond</option>
          </select>
          <div class="label-controls-row">
            <div class="size-slider-mini">
              <input type="range" id="title-size" min="12" max="72" value="28">
              <span id="title-size-value">28px</span>
            </div>
            <input type="color" id="title-color" value="#111111" class="color-picker-mini">
          </div>
        </div>

        <h2 style="margin-top: 25px;">Subtitle</h2>
        <div class="input-group">
          <input type="text" id="input-state" value="UNITED STATES">
        </div>
        <div class="label-controls">
          <select id="subtitle-font" class="font-select">
            <option value="Montserrat">Montserrat</option>
            <option value="Playfair Display">Playfair Display</option>
            <option value="Oswald">Oswald</option>
            <option value="Bebas Neue">Bebas Neue</option>
            <option value="Raleway">Raleway</option>
            <option value="Poppins">Poppins</option>
            <option value="Lato">Lato</option>
            <option value="Roboto">Roboto</option>
            <option value="Open Sans">Open Sans</option>
            <option value="Anton">Anton</option>
            <option value="Abril Fatface">Abril Fatface</option>
            <option value="Righteous">Righteous</option>
            <option value="Lobster">Lobster</option>
            <option value="Pacifico">Pacifico</option>
            <option value="Dancing Script">Dancing Script</option>
            <option value="Great Vibes">Great Vibes</option>
            <option value="Permanent Marker">Permanent Marker</option>
            <option value="Bangers">Bangers</option>
            <option value="Alfa Slab One">Alfa Slab One</option>
            <option value="Archivo Black">Archivo Black</option>
            <option value="Russo One">Russo One</option>
            <option value="Bungee">Bungee</option>
            <option value="Staatliches">Staatliches</option>
            <option value="Barlow Condensed">Barlow Condensed</option>
            <option value="Josefin Sans">Josefin Sans</option>
            <option value="Fjalla One">Fjalla One</option>
            <option value="Yanone Kaffeesatz">Yanone Kaffeesatz</option>
            <option value="Concert One">Concert One</option>
            <option value="Passion One">Passion One</option>
            <option value="Fredoka One">Fredoka One</option>
            <option value="Ultra">Ultra</option>
            <option value="Teko">Teko</option>
            <option value="Arvo">Arvo</option>
            <option value="Bitter">Bitter</option>
            <option value="Merriweather">Merriweather</option>
            <option value="Crimson Text">Crimson Text</option>
            <option value="PT Sans">PT Sans</option>
            <option value="Source Sans Pro">Source Sans Pro</option>
            <option value="Work Sans">Work Sans</option>
            <option value="DM Sans">DM Sans</option>
            <option value="Inter">Inter</option>
            <option value="Nunito">Nunito</option>
            <option value="Quicksand">Quicksand</option>
            <option value="Comfortaa">Comfortaa</option>
            <option value="Varela Round">Varela Round</option>
            <option value="Rubik">Rubik</option>
            <option value="Karla">Karla</option>
            <option value="Libre Baskerville">Libre Baskerville</option>
            <option value="EB Garamond">EB Garamond</option>
            <option value="Cormorant Garamond">Cormorant Garamond</option>
          </select>
          <div class="label-controls-row">
            <div class="size-slider-mini">
              <input type="range" id="subtitle-size" min="8" max="36" value="12">
              <span id="subtitle-size-value">12px</span>
            </div>
            <input type="color" id="subtitle-color" value="#111111" class="color-picker-mini">
          </div>
        </div>

        <h2 style="margin-top: 25px;">Coordinates</h2>
        <div class="input-group">
          <input type="text" id="input-coords" value="40.7128° N / 74.0060° W">
        </div>
        <div class="label-controls">
          <select id="coords-font" class="font-select">
            <option value="Montserrat">Montserrat</option>
            <option value="Playfair Display">Playfair Display</option>
            <option value="Oswald">Oswald</option>
            <option value="Bebas Neue">Bebas Neue</option>
            <option value="Raleway">Raleway</option>
            <option value="Poppins">Poppins</option>
            <option value="Lato">Lato</option>
            <option value="Roboto">Roboto</option>
            <option value="Open Sans">Open Sans</option>
            <option value="Anton">Anton</option>
            <option value="Abril Fatface">Abril Fatface</option>
            <option value="Righteous">Righteous</option>
            <option value="Lobster">Lobster</option>
            <option value="Pacifico">Pacifico</option>
            <option value="Dancing Script">Dancing Script</option>
            <option value="Great Vibes">Great Vibes</option>
            <option value="Permanent Marker">Permanent Marker</option>
            <option value="Bangers">Bangers</option>
            <option value="Alfa Slab One">Alfa Slab One</option>
            <option value="Archivo Black">Archivo Black</option>
            <option value="Russo One">Russo One</option>
            <option value="Bungee">Bungee</option>
            <option value="Staatliches">Staatliches</option>
            <option value="Barlow Condensed">Barlow Condensed</option>
            <option value="Josefin Sans">Josefin Sans</option>
            <option value="Fjalla One">Fjalla One</option>
            <option value="Yanone Kaffeesatz">Yanone Kaffeesatz</option>
            <option value="Concert One">Concert One</option>
            <option value="Passion One">Passion One</option>
            <option value="Fredoka One">Fredoka One</option>
            <option value="Ultra">Ultra</option>
            <option value="Teko">Teko</option>
            <option value="Arvo">Arvo</option>
            <option value="Bitter">Bitter</option>
            <option value="Merriweather">Merriweather</option>
            <option value="Crimson Text">Crimson Text</option>
            <option value="PT Sans">PT Sans</option>
            <option value="Source Sans Pro">Source Sans Pro</option>
            <option value="Work Sans">Work Sans</option>
            <option value="DM Sans">DM Sans</option>
            <option value="Inter">Inter</option>
            <option value="Nunito">Nunito</option>
            <option value="Quicksand">Quicksand</option>
            <option value="Comfortaa">Comfortaa</option>
            <option value="Varela Round">Varela Round</option>
            <option value="Rubik">Rubik</option>
            <option value="Karla">Karla</option>
            <option value="Libre Baskerville">Libre Baskerville</option>
            <option value="EB Garamond">EB Garamond</option>
            <option value="Cormorant Garamond">Cormorant Garamond</option>
          </select>
          <div class="label-controls-row">
            <div class="size-slider-mini">
              <input type="range" id="coords-size" min="6" max="24" value="9">
              <span id="coords-size-value">9px</span>
            </div>
            <input type="color" id="coords-color" value="#111111" class="color-picker-mini">
          </div>
        </div>

        <div class="toggle-group" style="margin-top:25px;">
          <label for="show-coords" style="display:flex; align-items:center; cursor:pointer;">
            <input type="checkbox" id="show-coords" checked style="width:auto; margin-right:10px;">
            Show Coordinates
          </label>
        </div>
      </div>

      <div id="tab-size" class="editor-panel">
        <h2>Poster Size</h2>
        <select id="size-select" class="full-select">
          <optgroup label="Imperial (Inch) ">
            <option value="11x17">11 x 17 in</option>
            <option value="12x18">12 x 18 in</option>
            <option value="18x24">18 x 24 in</option>
            <option value="24x36">24 x 36 in</option>
          </optgroup>

          <optgroup label="Metric (CM)">
            <option value="30x40cm">30x40 cm</option>
            <option value="50x70cm" selected>50x70 cm</option>
            <option value="70x100cm">70x100 cm</option>
          </optgroup>

          <optgroup label="Digital">
            <option value="digital">Digital Download</option>
          </optgroup>
        </select>
      </div>

      <div id="tab-frame" class="editor-panel">
        <h2>Frame Material</h2>
        <div class="frame-material-grid">
          <button class="frame-material-btn active" data-material="none">
            <svg width="16" height="16" viewBox="0 0 16 16" fill="none" stroke="currentColor" stroke-width="1.5">
              <path d="M2 2l12 12M14 2L2 14"/>
            </svg>
            <span>None</span>
          </button>
          <button class="frame-material-btn" data-material="wood">
            <svg width="16" height="16" viewBox="0 0 16 16" fill="none" stroke="currentColor" stroke-width="1.5">
              <rect x="1" y="1" width="14" height="14" rx="1"/>
              <path d="M3 4h10M3 8h10M3 12h10"/>
            </svg>
            <span>Wood</span>
          </button>
          <button class="frame-material-btn" data-material="metal">
            <svg width="16" height="16" viewBox="0 0 16 16" fill="none" stroke="currentColor" stroke-width="1.5">
              <rect x="1" y="1" width="14" height="14" rx="0"/>
            </svg>
            <span>Metal</span>
          </button>
          <button class="frame-material-btn" data-material="print">
            <svg width="16" height="16" viewBox="0 0 16 16" fill="none" stroke="currentColor" stroke-width="1.5">
              <rect x="2" y="2" width="12" height="12" rx="0"/>
              <rect x="4" y="4" width="8" height="8" rx="0"/>
            </svg>
            <span>Print</span>
          </button>
        </div>

        <div id="frame-wood-options" class="frame-options" style="display:none;">
          <h2 style="margin-top: 25px;">Wood Type</h2>
          <div class="wood-grid">
            <button class="wood-btn active" data-wood="maple" style="background: linear-gradient(135deg, #F5DEB3 0%, #DEB887 100%);">
              <span>Maple</span>
            </button>
            <button class="wood-btn" data-wood="oak" style="background: linear-gradient(135deg, #C19A6B 0%, #8B7355 100%);">
              <span>Oak</span>
            </button>
            <button class="wood-btn" data-wood="cherry" style="background: linear-gradient(135deg, #8B4513 0%, #5D3A1A 100%);">
              <span>Cherry</span>
            </button>
            <button class="wood-btn" data-wood="walnut" style="background: linear-gradient(135deg, #5C4033 0%, #3E2723 100%);">
              <span>Walnut</span>
            </button>
            <button class="wood-btn" data-wood="pine" style="background: linear-gradient(135deg, #F5E6D3 0%, #D4C4A8 100%);">
              <span>Pine</span>
            </button>
            <button class="wood-btn" data-wood="ebony" style="background: linear-gradient(135deg, #2C2C2C 0%, #1A1A1A 100%);">
              <span>Ebony</span>
            </button>
            <button class="wood-btn" data-wood="beech" style="background: linear-gradient(135deg, #E8D4B8 0%, #C9B896 100%);">
              <span>Beech</span>
            </button>
            <button class="wood-btn" data-wood="mahogany" style="background: linear-gradient(135deg, #6B3A3A 0%, #4A2828 100%);">
              <span>Mahogany</span>
            </button>
          </div>
          <div class="input-group" style="margin-top: 20px;">
            <label>Or Custom Color</label>
            <input type="color" id="wood-custom-color" value="#8B7355" class="color-picker">
          </div>
        </div>

        <div id="frame-metal-options" class="frame-options" style="display:none;">
          <h2 style="margin-top: 25px;">Metal Color</h2>
          <div class="metal-grid">
            <button class="metal-btn active" data-metal="black" style="background: linear-gradient(135deg, #2C2C2C 0%, #1A1A1A 100%);">
              <span>Black</span>
            </button>
            <button class="metal-btn" data-metal="white" style="background: linear-gradient(135deg, #FFFFFF 0%, #E8E8E8 100%); color: #333;">
              <span>White</span>
            </button>
            <button class="metal-btn" data-metal="silver" style="background: linear-gradient(135deg, #C0C0C0 0%, #A8A8A8 100%); color: #333;">
              <span>Silver</span>
            </button>
            <button class="metal-btn" data-metal="gold" style="background: linear-gradient(135deg, #D4AF37 0%, #B8960C 100%);">
              <span>Gold</span>
            </button>
            <button class="metal-btn" data-metal="bronze" style="background: linear-gradient(135deg, #CD7F32 0%, #A66628 100%);">
              <span>Bronze</span>
            </button>
            <button class="metal-btn" data-metal="copper" style="background: linear-gradient(135deg, #B87333 0%, #8B5A2B 100%);">
              <span>Copper</span>
            </button>
          </div>
        </div>

        <div id="frame-print-options" class="frame-options" style="display:none;">
          <h2 style="margin-top: 25px;">Border Style</h2>
          <div class="style-grid">
            <button class="print-style-btn active" data-print="solid">Solid</button>
            <button class="print-style-btn" data-print="dashed">Dashed</button>
            <button class="print-style-btn" data-print="double">Double</button>
            <button class="print-style-btn" data-print="groove">Groove</button>
            <button class="print-style-btn" data-print="ridge">Ridge</button>
            <button class="print-style-btn" data-print="inset">Inset</button>
          </div>
          <div class="input-group" style="margin-top: 15px;">
            <label>Border Color</label>
            <input type="color" id="print-border-color" value="#111111" class="color-picker">
          </div>
        </div>

        <div id="frame-size-options" class="frame-options" style="display:none;">
          <h2 style="margin-top: 25px;">Frame Width</h2>
          <div class="input-group">
            <div class="outline-slider-row">
              <input type="range" id="frame-size" min="5" max="30" value="15">
              <span id="frame-size-value">15px</span>
            </div>
          </div>
        </div>
      </div>

      <div class="sidebar-footer">
        <!-- LOCAL DEV: Simulated Shopify form (hidden inputs for state tracking) -->
        <form id="local-cart-form">
          <input type="hidden" id="prop-city" name="properties[City]" value="New York">
          <input type="hidden" id="prop-style" name="properties[Style]" value="Classic">
          <input type="hidden" id="prop-coords" name="properties[Coordinates]" value="">
          <input type="hidden" id="prop-size" name="properties[Size]" value="18x24">

          <div class="price-row">
            <span class="price-label">Total:</span>
            <span class="price-val" id="display-price">$49.00</span>
          </div>

          <button type="submit" class="btn-checkout">Add to Cart</button>
        </form>
        
        <!-- LOCAL DEV: Debug info panel -->
        <div id="debug-panel" style="margin-top: 15px; padding: 10px; background: #f0f0f0; border-radius: 4px; font-size: 11px; display: none;">
          <strong>Debug Info (Local Dev Only):</strong>
          <div id="debug-info"></div>
        </div>
      </div>
    </div>
  </div>
</div>

<!-- Mapbox JS -->
<script src="https://api.mapbox.com/mapbox-gl-js/v3.0.0/mapbox-gl.js"></script>
<script src="https://api.mapbox.com/mapbox-gl-js/plugins/mapbox-gl-geocoder/v5.0.0/mapbox-gl-geocoder.min.js"></script>

<!-- Local JS (same as Shopify asset) -->
<script src="map-editor.js"></script>

<!-- LOCAL DEV: Additional script for local-only functionality -->
<script>
    // Handle form submission locally (simulates Shopify cart)
    document.getElementById('local-cart-form').addEventListener('submit', function(e) {
        e.preventDefault();
        
        // Gather form data
        const formData = {
            city: document.getElementById('prop-city').value,
            style: document.getElementById('prop-style').value,
            coords: document.getElementById('prop-coords').value,
            size: document.getElementById('prop-size').value
        };
        
        // Show what would be sent to Shopify
        alert('LOCAL DEV: Add to Cart clicked!\n\nData that would be sent to Shopify:\n' + JSON.stringify(formData, null, 2));
        
        console.log('Cart data:', formData);
    });
    
    // Toggle debug panel with keyboard shortcut (Ctrl+Shift+D)
    document.addEventListener('keydown', function(e) {
        if (e.ctrlKey && e.shiftKey && e.key === 'D') {
            const debugPanel = document.getElementById('debug-panel');
            debugPanel.style.display = debugPanel.style.display === 'none' ? 'block' : 'none';
            updateDebugInfo();
        }
    });
    
    function updateDebugInfo() {
        const debugInfo = document.getElementById('debug-info');
        debugInfo.innerHTML = `
            City: ${document.getElementById('prop-city').value}<br>
            Style: ${document.getElementById('prop-style').value}<br>
            Coords: ${document.getElementById('prop-coords').value}<br>
            Size: ${document.getElementById('prop-size').value}
        `;
    }
</script>

</body>
</html>
